# 开发环境配置
spring.application.name=quota-matching-tool
server.port=8080

# 数据库配置 - H2 (内存数据库，便于开发演示)
# spring.datasource.url=jdbc:h2:mem:quota_db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
#spring.datasource.driverClassName=org.h2.Driver
# spring.datasource.username=sa
# spring.datasource.password=

# 如需使用MySQL，取消下面的注释并注释掉上面的H2配置
spring.datasource.url=jdbc:mysql://localhost:3306/quota_db?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
spring.datasource.username=root
spring.datasource.password=280230
spring.jpa.database-platform=org.hibernate.dialect.MySQL57Dialect

# JPA配置
# spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# H2控制台（开发时使用）
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# 文件上传配置
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# 日志配置（开发环境）
logging.level.root=INFO
logging.level.com.enterprise.quota=DEBUG

# ==================== 性能优化配置（4核4G服务器） ====================

# HikariCP 连接池配置（针对4核4G服务器优化）
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.pool-name=QuotaMatchingHikariPool

# JPA批量处理优化
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# 关闭生产环境SQL日志（提升性能）
# spring.jpa.show-sql=false
# spring.jpa.properties.hibernate.format_sql=false

# 线程池配置（用于并行匹配）
quota.matching.thread-pool.core-size=4
quota.matching.thread-pool.max-size=8
quota.matching.thread-pool.queue-capacity=1000
quota.matching.thread-pool.keep-alive-seconds=60

# 批量处理配置
quota.matching.batch-size=200
quota.matching.save-batch-size=100

